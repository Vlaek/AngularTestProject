<div class="container">
  <div class="calculator">
    <h2 class="calculator__title">Калькулятор</h2>
  
    <ng-container *ngFor="let group of calcGroups; let i = index">
      <div class="calculator__container">
        <span>(</span>
        <select class="calculator__modif" [(ngModel)]="group.first.modificator">
          <option
            [value]="modificator.value"
            *ngFor="let modificator of calcModifiers | keyvalue"
          >
            {{ modificator.value }}
          </option>
        </select>
        <input
          type="number"
          class="calculator__input"
          [(ngModel)]="group.first.value"
        />
        <select class="calculator__select" [(ngModel)]="group.operation">
          <option
            [value]="operation.value"
            *ngFor="let operation of calcOperations | keyvalue"
          >
            {{ operation.value }}
          </option>
        </select>
        <select class="calculator__modif" [(ngModel)]="group.second.modificator">
          <option
            [value]="modificator.value"
            *ngFor="let modificator of calcModifiers | keyvalue"
          >
            {{ modificator.value }}
          </option>
        </select>
        <input
          type="number"
          class="calculator__input"
          [(ngModel)]="group.second.value"
        />
        <span>)</span>
        <button
          class="calculator__btn calculator__btn_delete"
          (click)="removeGroup(i)"
          *ngIf="calcGroups.length > 1"
        >
          delete
        </button>
      </div>
  
      <div class="calculator__container">
        <select
          class="calculator__select"
          [(ngModel)]="operationsBetweenGroups[i]"
          *ngIf="operationsBetweenGroups.length > i"
        >
          <option
            [value]="operation.value"
            *ngFor="let operation of calcOperations | keyvalue"
          >
            {{ operation.value }}
          </option>
        </select>
      </div>
    </ng-container>
  
    <div class="calculator__footer">
      <span class="calculator__result">
        Результат: {{ result ?? "Нажмите расчитать!" }}
      </span>
      <div class="calculator__history">
        <span class="calculator__history-title">История операций:</span>
        <span *ngFor="let obj of history; let i = index"
          >{{ i + 1 }}. {{ obj }}</span
        >
      </div>
      <div class="calculator__btn__list">
        <button class="calculator__btn" (click)="calcGroup()">Рассчитать</button>
        <button class="calculator__btn" (click)="addGroup()">
          Добавить группу
        </button>
      </div>
    </div>
  </div>
</div>
